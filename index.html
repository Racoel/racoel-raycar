<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Rádio Online – Racoel Raycar</title>
  <style>
    body { text-align:center; font-family:Arial; }
    button { margin:5px; padding:10px 20px; font-size:16px; }
    #info { margin:10px 0; font-weight:bold; }
    #contador { margin:5px 0; color:gray; }
  </style>
</head>
<body>

<h2>Rádio – Faixas Opus16</h2>
<div id="info">A preparar...</div>
<div id="contador">Faixas tocadas: 0</div>

<audio id="player" controls autoplay></audio>
<br>
<button id="anterior">⏮ Anterior</button>
<button id="playpause">⏯ Play/Pause</button>
<button id="proxima">Próxima ▶</button>

<script>
  const faixas = [
    "audio/opus16_01_o_teu_nome.mp3",
    "audio/opus16_02_dare.mp3",
    "audio/opus16_03_diacronia.mp3",
    "audio/opus16_04_extraordinary.mp3",
    "audio/opus16_05_diacronia_reprise.mp3",
    "audio/opus16_05_pena_maior.mp3",
    "audio/opus16_06_from_the_top_of_the_eiffel_tower_instrumental.mp3",
    "audio/opus16_07_o_que_a_gente_sente.mp3",
    "audio/opus16_08_se_soubesses.mp3",
    "audio/opus16_09_var8.mp3",
    "audio/opus16_10_para_la_do_tempo.mp3",
    "audio/opus16_11_sunrise_beach_party_instrumental.mp3",
    "audio/opus16_12_mudanca.mp3",
    "audio/opus16_13_batucada.mp3",
    "audio/opus16_14_amores.mp3",
    "audio/opus16_15_pena_maior_take1.mp3",
    "audio/opus16_17_var5.mp3",
    "audio/opus16_18_vvar2.mp3",
    "audio/opus16_22_var7.mp3",
    "audio/opus16_23_var1617.mp3",
    "audio/opus16_24_bonus_track_var1616.mp3",
    "audio/opus16_80_give_me_a_chance.mp3",
    "audio/opus16_81_into_your_eyes.mp3",
    "audio/opus16_82_perto.mp3",
    "audio/opus16_83_tudo_a_ver.mp3",
    "audio/opus16_84_o_lugar.mp3",
    "audio/opus16_85_ligacao.mp3",
    "audio/opus16_85_stop_tune.mp3"
  ];

  const player = document.getElementById("player");
  const info = document.getElementById("info");
  const contadorDisplay = document.getElementById("contador");
  const botaoPlayPause = document.getElementById("playpause");
  const botaoProxima = document.getElementById("proxima");
  const botaoAnterior = document.getElementById("anterior");

  let fila = [];
  let historico = [];
  let indiceAtual = -1;
  let contadorFaixas = 0;

  function baralhar(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function novaFila() {
    fila = baralhar([...faixas]);
    historico = [];
    indiceAtual = -1;
  }

  function atualizarInfo() {
    if (indiceAtual >= 0) {
      const nomeFaixa = fila[indiceAtual].split("/").pop();
      info.textContent = `Faixa ${indiceAtual + 1} de ${faixas.length}: ${nomeFaixa}`;
    }
    contadorDisplay.textContent = `Faixas tocadas: ${contadorFaixas}`;
  }

  function tocarProxima() {
    if (fila.length === 0) novaFila();
    indiceAtual++;
    if (indiceAtual >= fila.length) {
      novaFila();
      indiceAtual = 0;
    }
    historico.push(fila[indiceAtual]);
    player.src = fila[indiceAtual];
    player.play();
    contadorFaixas++;
    console.log(`Faixa ${contadorFaixas} tocada: ${fila[indiceAtual].split("/").pop()}`);
    atualizarInfo();
  }

  function tocarAnterior() {
    if (historico.length <= 1) return;
    historico.pop(); // remove atual
    const anterior = historico.pop(); // pega anterior
    indiceAtual = fila.indexOf(anterior);
    player.src = anterior;
    player.play();
    contadorFaixas++;
    console.log(`Faixa ${contadorFaixas} tocada: ${anterior.split("/").pop()}`);
    historico.push(anterior);
    atualizarInfo();
  }

  player.addEventListener("ended", tocarProxima);
  botaoProxima.addEventListener("click", tocarProxima);
  botaoAnterior.addEventListener("click", tocarAnterior);
  botaoPlayPause.addEventListener("click", () => {
    if (player.paused) player.play();
    else player.pause();
  });

  // Inicializa
  novaFila();
  tocarProxima();
</script>

</body>
</html>
